<%- include partials/header.ejs %>

<div id="travel-log" class="container">
  <div class="container stats">
    <h2 class="title is-2">Your travel log, <%= currentUser.username %></h2>
    <!-- Statitics summary start -->
    <div class="columns">
      <div class="column">
        <nav class="level is-mobile">
          <div class="level-item has-text-centered">
            <div>
              <p class="heading">Countries visited</p>
              <p><%= numOfCountries %></p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="heading">Continents</p>
              <p><%= numOfContinents %>/6</p>
            </div>
          </div>
        </nav>
      </div>
      <div class="column">
        <nav class="level is-mobile">
          <div class="level-item has-text-centered">
            <div>
              <p class="heading">Area covered</p>
              <p><%= percentageArea %> %</p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="heading">Last trip</p>
              <% if (lastVisitedCountryFlag === undefined) { %>
              <p><i class="fab fa-font-awesome-flag"></i></p>
              <% } else { %>
              <p><img src="<%= lastVisitedCountryFlag %>" alt="country-flag" width="50px" height="50px"></p>
              <% } %>
            </div>
          </div>
        </nav>
      </div>
    </div>
    <!-- Statitics summary end -->
  </div>

  <div class="container log">
    <div class="trip-list">
      <% trips.forEach((trip)=> { %>
      <% if(trip.countries[0].country.region === 'Europe') { %>
      <a href="/travellog/<%= trip.id %>" class="box europe">
      <% } else if(trip.countries[0].country.region === 'Asia') { %>
      <a href="/travellog/<%= trip.id %>" class="box asia">
      <% } else if(trip.countries[0].country.region === 'Americas') { %>
      <a href="/travellog/<%= trip.id %>" class="box americas">
      <% } else if(trip.countries[0].country.region === 'Africa') { %>
      <a href="/travellog/<%= trip.id %>" class="box africa">
      <% } else if(trip.countries[0].country.region === 'Oceania') { %>
      <a href="/travellog/<%= trip.id %>" class="box oceania">
      <% } %>
        <h3 class="title is-3"><%= trip.name %></h3>
        <form action="/travellog/<%= trip.id %>/delete" method="POST">
          <button class="remove-trip-btn delete is-medium" type="submit">-</button>    
        </form> 
      </a>
      <% }) %>
    </div>
    <a class="button" href="/travellog/add">Add trip</a>
  </div>
</div>
<script src="/js/setTripImage.js"></script>


